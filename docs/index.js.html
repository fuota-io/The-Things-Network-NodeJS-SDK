<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
var __awaiter = (this &amp;&amp; this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this &amp;&amp; this.__importDefault) || function (mod) {
    return (mod &amp;&amp; mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.User = void 0;
const axios_1 = __importDefault(require("axios"));
/* It's a class that makes an API call and returns a promise. */
class APICall {
    send(params) {
        return __awaiter(this, void 0, void 0, function* () {
            /* It's making an API call and returning a promise. */
            return (0, axios_1.default)(params.url, {
                method: params.method,
                data: params.data,
                headers: params.headers,
            })
                .then((response) => {
                return response.data;
            })
                .catch((error) => {
                return Promise.reject(error.response.data);
            });
        });
    }
}
class User {
    /**
     * The constructor function is a special function that is called when an object is created from a
     * class.
     * @param {Config} config - Config
     */
    constructor(config) {
        this.API = new APICall();
        this.COLLAB_ID = config.COLLAB_ID;
        this.IDENTITY_SERVER = config.IDENTITY_SERVER;
        this.JOIN_SERVER = config.JOIN_SERVER;
        this.APPLICATION_SERVER = config.APPLICATION_SERVER;
        this.NETWORK_SERVER = config.NETWORK_SERVER;
        this.API_KEY = config.API_KEY;
    }
    // /**
    //  * This function takes a string as an argument and returns that string.
    //  * @param {string} collabid - The ID of the collaboration.
    //  * @returns The value of the variable COLLAB_ID.
    //  */
    // collabId(collabid: string) {
    //     const COLLAB_ID = collabid;
    //     return COLLAB_ID;
    // }
    /**
     * The function returns an object with a property called AUTHORIZATION, which has a value of the
     * string "Bearer " concatenated with the value of the API_KEY property.
     * @returns The HEADERS object.
     */
    get headers() {
        const headers = { AUTHORIZATION: `Bearer ${this.API_KEY}` };
        return headers;
    }
    /**
     * This function creates an application for a user.
     * @param {UserPayload} payload - UserPayload
     * @returns The response from the API call.
     */
    createApplication(payload) {
        const apiPayload = {
            application: {
                ids: { application_id: payload.application_id },
                name: payload.name,
                description: payload.description,
            },
        };
        return this.API.send({
            method: 'POST',
            url: `${this.IDENTITY_SERVER}/users/${this.COLLAB_ID}/applications`,
            headers: this.headers,
            data: apiPayload,
        });
    }
    /**
     * This function is used to get the list of applications that a user has access to
     * @param {getApplicationUserPayload} payload - getApplicationUserPayload
     * @returns The response from the API call.
     */
    getApplicationList(payload) {
        return this.API.send({
            method: 'GET',
            url: `${this.IDENTITY_SERVER}/users/${payload.user_id}/applications`,
            headers: this.headers,
            data: {},
        });
    }
    /**
     * It takes a payload object with a user_id, email, name, rights, and expires_at property and returns
     * a promise that resolves to an object with an api_key property
     * @param {CreateAPIKeyUserPayload} payload - CreateAPIKeyUserPayload
     * @returns The response from the API call.
     */
    createAPIKey(payload) {
        const apiPayload = {
            user_ids: { user_id: payload.user_id, email: payload.email },
            name: payload.name,
            rights: payload.rights,
            expires_at: payload.expires_at,
        };
        return this.API.send({
            method: 'POST',
            url: `${this.IDENTITY_SERVER}/users/${payload.user_id}/api-keys`,
            headers: this.headers,
            data: apiPayload,
        });
    }
    /**
     * This function is used to get a list of API keys for a user
     * @param {GetAPIKeyListUserPayload} payload - GetAPIKeyListUserPayload
     * @returns The response from the API call.
     */
    getAPIKeyList(payload) {
        return this.API.send({
            method: 'GET',
            url: `${this.IDENTITY_SERVER}/users/${payload.user_id}/api-keys`,
            headers: this.headers,
            data: payload,
        });
    }
    /**
     * This function takes a payload object with two properties, user_id and key_id, and returns a
     * promise that resolves to an object with the properties user_id, key_id, and key_secret
     * @param {GetAPIKeyInfoUserPayload} payload - GetAPIKeyInfoUserPayload
     * @returns The response from the API.
     */
    getAPIKeyInfo(payload) {
        return this.API.send({
            method: 'GET',
            url: `${this.IDENTITY_SERVER}/users/${payload.user_id}/api-keys/${payload.key_id}`,
            headers: this.headers,
            data: payload,
        });
    }
    /**
     * This function takes in a payload object with a user_id, email, api_key_id, api_key_name,
     * api_key_rights, and expires_at property and returns a promise that resolves to an object with an
     * id, name, rights, and expires_at property
     * @param {UpdateAPIKeyUserPayload} payload - UpdateAPIKeyUserPayload
     * @returns The response is a promise that resolves to an object with the following properties:
     */
    updateAPIKey(payload) {
        const extractPayload = {
            name: payload.api_key_name,
            rights: payload.api_key_rights,
            expires_at: payload.expires_at,
        };
        const paths = Object.keys(extractPayload);
        const apiPayload = {
            user_ids: { user_id: payload.user_id, email: payload.email },
            api_key: {
                id: payload.api_key_id,
                name: payload.api_key_name,
                rights: payload.api_key_rights,
                expires_at: payload.expires_at,
            },
            field_mask: {
                paths: paths,
            },
        };
        return this.API.send({
            method: 'PUT',
            url: `${this.IDENTITY_SERVER}/users/${payload.user_id}/api-keys/${payload.api_key_id}`,
            headers: this.headers,
            data: apiPayload,
        });
    }
    /**
     * This function is used to get the collaborator information of a user
     * @param {GetCollaboratorInfoUserPayload} payload - GetCollaboratorInfoUserPayload
     * @returns The response is a JSON object with the following properties:
     */
    getCollaboratorInfo(payload) {
        return this.API.send({
            method: 'GET',
            url: `${this.IDENTITY_SERVER}/applications/${payload.application_id}/collaborator/user/${payload.user_id}`,
            headers: this.headers,
            data: payload,
        });
    }
    /**
     * This function takes a payload object with a user_id, email, application_id, and rights, and
     * returns a promise that resolves to the response from the API.
     * @param {SetCollaboratorUserPayload} payload - SetCollaboratorUserPayload
     * @returns The response is a promise.
     */
    setCollaborator(payload) {
        const apiPayload = {
            application_ids: { application_id: payload.application_id },
            collaborator: {
                ids: {
                    user_ids: { user_id: payload.user_id, email: payload.email },
                },
                rights: payload.rights,
            },
        };
        return this.API.send({
            method: 'PUT',
            url: `${this.IDENTITY_SERVER}/applications/${payload.application_id}/collaborators`,
            headers: this.headers,
            data: apiPayload,
        });
    }
}
exports.User = User;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="User.html">User</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Mon Mar 06 2023 16:00:43 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
